import{u as m,r as c,j as e,B as _,M as w,a as y,b as f,R,c as h,g as b,s as d,H as j,S as g,d as N}from"./index-db807105.js";import{g as B,S as q,F as S}from"./Slider-735e4287.js";const P="_container_726yq_1",k="_wrapper_726yq_5",E="_smiles_726yq_15",M="_cancelBtn_726yq_20",A="_infoRating_726yq_42",u={container:P,wrapper:k,smiles:E,cancelBtn:M,infoRating:A},v=[{value:1,emoji:"üòñ",description:"–£–∂–∞—Å–Ω–æ"},{value:2,emoji:"üòû",description:"–ü–ª–æ—Ö–æ"},{value:3,emoji:"üòê",description:"–°—Ä–µ–¥–Ω–µ"},{value:4,emoji:"üòä",description:"–•–æ—Ä–æ—à–æ"},{value:5,emoji:"üòÉ",description:"–û—Ç–ª–∏—á–Ω–æ"}],T=({movieId:s,setShowRateWindow:t})=>{const n=m(),[a,r]=c.useState(null),l=i=>{n(w.addRating({movieId:s,rating:i.value})),t(!1)},p=i=>{r(i)},C=()=>{r(null)};return e.jsx("div",{className:u.container,children:e.jsxs("div",{className:u.wrapper,children:[v.map(i=>e.jsx("span",{className:u.smiles,onMouseEnter:()=>p(i.value),onMouseLeave:C,onClick:()=>l(i),children:a&&a>=i.value?i.emoji:"üòê"},i.value)),e.jsx(_,{styles:u.cancelBtn,handler:()=>t(),children:"–û—Ç–º–µ–Ω–∏—Ç—å"}),e.jsx("div",{className:u.infoRating,children:a&&e.jsxs("p",{children:["–û—Ü–µ–Ω–∫–∞: ",a," (",v[a-1].description,")"]})})]})})},H="_wrapperCard_1x1qt_2",F="_content_1x1qt_9",I="_poster_1x1qt_16",$="_rating_1x1qt_22",D="_info_1x1qt_31",L="_userRate_1x1qt_38",W="_rateBtn_1x1qt_42",Y="_reviewBtn_1x1qt_55",K="_reviewBtnAfter_1x1qt_73",Q="_rate_1x1qt_42",U="_rateContent_1x1qt_89",V="_btnDelete_1x1qt_101",X="_btnChangeRate_1x1qt_123",o={wrapperCard:H,content:F,poster:I,rating:$,info:D,userRate:L,rateBtn:W,reviewBtn:Y,reviewBtnAfter:K,rate:Q,rateContent:U,btnDelete:V,btnChangeRate:X},Z="_iframe_oajka_1",z="_wrapperTrailer_oajka_11",G="_btnHandle_oajka_15",x={iframe:Z,wrapperTrailer:z,btnHandle:G},J=async s=>(await(await fetch(`https://api.kinopoisk.dev/v1.4/movie/${s}`,{headers:{accept:"application/json","X-API-KEY":"KNARZC7-GV6MBQC-QY96MPW-RYZFKX5"}})).json()).videos.trailers[0].url,O=({id:s})=>{const[t,n]=c.useState(!1),[a,r]=c.useState(""),l=async()=>{if(n(p=>!p),!a){const p=await J(s);r(p)}};return e.jsxs("div",{className:x.wrapperTrailer,children:[e.jsxs("button",{onClick:l,className:x.btnHandle,children:[t?"Hide youtube":"Snow youtube"," Trailer"]}),t&&e.jsx("iframe",{src:a,allowFullScreen:!0,title:"Embedded YouTube Video",className:x.iframe})]})},ee=c.memo(({movie:s})=>{const[t,n]=c.useState(!1),a=m(),r=y();return c.useCallback(()=>{r(`${f.reviewsPage}`),a(R.addMovieToReview(s))},[a,s,r]),e.jsxs("div",{className:o.wrapperCard,children:[e.jsxs("div",{className:o.content,children:[e.jsx("div",{className:o.poster,style:{backgroundImage:`url(${s.poster.url})`}}),e.jsx(O,{id:s.id})]}),e.jsx("div",{className:o.info,children:e.jsxs("div",{className:o.rating,children:["–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞:",s.userRating?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:o.userRate,children:s.userRating}),e.jsx(_,{styles:o.btnChangeRate,handler:()=>n(!0),children:"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫—É"})]}):e.jsx("p",{children:e.jsx(_,{styles:o.rateBtn,handler:()=>n(!0),children:"–û—Ü–µ–Ω–∏—Ç—å"})}),e.jsx("div",{style:{display:t?"block":"none"},className:o.rate,children:e.jsx(T,{movieId:s.id,setShowRateWindow:n})})]})})]})}),ae=()=>{const s=m(),t=h(B);h(b);const n=y(),a=h(l=>l.user.id),r=async()=>{s(w.clearAll()),N(a,"myCollection")};return c.useEffect(()=>{localStorage.getItem("userEmail")||n(f.home)},[n]),t.length?e.jsxs("section",{className:d.main,children:[e.jsx(j,{}),t.length&&e.jsxs(_,{styles:d.deleteEntireList,handler:()=>r(),children:["–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ (",t.length,")"]}),e.jsxs("div",{className:d.mainWrapper,children:[e.jsx(g,{}),e.jsx(q,{width:"80%",height:"80%",sizeCard:1800,itemsPerPage:1,snowButtons:t.length>1,children:t.map(l=>e.jsx(ee,{movie:l},l.id))})]}),e.jsx(S,{})]}):e.jsxs("section",{className:d.main,children:[e.jsx(j,{}),e.jsxs("div",{className:d.emptyWrapper,children:[e.jsx(g,{}),e.jsx("h2",{className:d.emptyPage,children:"–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç"})]})]})};export{ae as default};
